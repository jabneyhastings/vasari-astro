---
import CmsImage from '../components/CmsImage.astro';
import MarkdownIt from 'markdown-it';
const md = new MarkdownIt();
const { title, content, image, index } = Astro.props;
---

<section 
    class={`service-block ${!image ? 'service-block--no-image' : ''}`} 
    data-animate
    data-astro-cid-service-block
>
    {image && (
        <div class="service-block__image" data-animate-item>
            <CmsImage
                src={image}
                alt={title}
                height={500}
                loading="lazy"
            />
        </div>
    )}
    <div class="service-block__text" data-animate-item>
        <h2 class="service-block__title">{title}</h2>
        <div class="service-block__content text-content" set:html={md.render(typeof content === 'string' ? content : '')} />
    </div>
</section>

<style>
.service-block {
    --tx: 80px;
    --ty: 40px;
    --scale-start: 0.98;
    --duration: 0.8s;
    --easing: cubic-bezier(0.25, 0.46, 0.45, 0.94);

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 4rem;
    margin: 0  0 4rem 0;
}

.service-block--no-image {
    justify-content: center;
    text-align: center;
}

.service-block__image {
    flex: 0 0 auto;
}

  :global(.service-block__image img) {
    max-width: 500px;
    width: 100%;
    height: auto;
    display: block;
}

.service-block__text {
    flex: 1;
}


/* Responsive mobile adjustments (fallback) */
@media (max-width: 1024px) {
    .service-block {
        flex-direction: column !important;
        text-align: center;
        gap: 1.5rem;
    }

    .service-block__image img {
        max-width: 100%;
    }
}
</style>
