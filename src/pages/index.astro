---
import Layout from '../layouts/Layout.astro';
import HeroCarousel from '../components/HeroCarousel.astro';
import SecondaryCarousel from '../components/SecondaryCarousel.astro';
import TextBlock from '../components/TextBlock.astro';
import { getEntry } from 'astro:content';

const homeData = await getEntry('pages', 'home');

if (!homeData) {
  throw new Error('Home page data not found');
}

const { heroCarousel, aboutSection, secondaryCarousel, textBlock } = homeData.data;
---

<Layout title={homeData.data.title}>
    <!-- Hero Carousel -->
    {heroCarousel && <HeroCarousel slides={heroCarousel} />}

    <!-- About Section -->
    {aboutSection && (
        <TextBlock 
            id="about" 
            className="about-section"
            title={aboutSection.title}
            content={aboutSection.content}
        />
    )}

    <!-- Secondary Carousel -->
    <section id="services">
        {secondaryCarousel && (
            <SecondaryCarousel
                slides={secondaryCarousel.slides}
            />
        )}
    </section>

    <!-- Text Block -->
    {textBlock && (
        <TextBlock
            content={textBlock.content}
        />
    )}
</Layout>
