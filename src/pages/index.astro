---
import Layout from '../layouts/Layout.astro';
import HeroCarousel from '../components/HeroCarousel.astro';
import SecondaryCarousel from '../components/SecondaryCarousel.astro';
import { getEntry } from 'astro:content';

const homeData = await getEntry('pages', 'home');

if (!homeData) {
  throw new Error('Home page data not found');
}

const { heroCarousel, aboutSection, secondaryCarousel, textBlock } = homeData.data;
---

<Layout title={homeData.data.title}>
    <!-- Hero Carousel -->
    {heroCarousel && <HeroCarousel slides={heroCarousel} />}

  <!-- About Section -->
    {aboutSection && (
        <section id="about" class="about-section">
            <div class="about-header">
                <h2>{aboutSection.title}</h2>
            </div>
            <div class="about-content" set:html={aboutSection.content} />
        </section>
    )}

    <!-- Secondary Carousel -->
    <section id="services">
        {secondaryCarousel && (
            <SecondaryCarousel
                slides={secondaryCarousel.slides}
            />
        )}
    </section>

  <!-- Text Block -->
    {textBlock && (
        <section class="text-block">
            <p>{textBlock.content}</p>
        </section>
    )}
</Layout>
