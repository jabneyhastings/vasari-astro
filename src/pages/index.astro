---
import Layout from '../layouts/Layout.astro';
import HeroCarousel from '../components/HeroCarousel.astro';
import SecondaryCarousel from '../components/SecondaryCarousel.astro';
import TextBlock from '../components/TextBlock.astro';
import { getEntry } from 'astro:content';
import projectData from '../content/projects/projects.json';

const homeData = await getEntry('home', 'home');
if (!homeData) {
    throw new Error('Home page data not found');
}

const { heroCarousel, aboutSection, textBlock } = homeData.data;
const projects = projectData.projects;
---

<Layout title={homeData.data.title}>
    {heroCarousel && (
        <HeroCarousel
            slides={heroCarousel.map(slide => ({
                image: slide.image ?? '',
                alt: slide.alt ?? '',
            }))}
        />
    )}

    {aboutSection && (
        <TextBlock 
            id="about" 
            className="about-section"
            content={aboutSection.content}
        />
    )}

    <section id="projects">
        <SecondaryCarousel projects={projects} />
    </section>

    {textBlock && (
        <TextBlock content={textBlock.content} />
    )}
</Layout>